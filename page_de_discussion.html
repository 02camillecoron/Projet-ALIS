<!DOCTYPE html>
<html>
  <head>
    <title>page de discussion</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <meta http-equiv="content-type" content="text/html; charset=utf-8"/>
    <link href="resources/css/axure_rp_page.css" type="text/css" rel="stylesheet"/>
    <link href="data/styles.css" type="text/css" rel="stylesheet"/>
    <link href="files/page_de_discussion/styles.css" type="text/css" rel="stylesheet"/>
    <script src="resources/scripts/jquery-3.2.1.min.js"></script>
    <script src="resources/scripts/axure/axQuery.js"></script>
    <script src="resources/scripts/axure/globals.js"></script>
    <script src="resources/scripts/axutils.js"></script>
    <script src="resources/scripts/axure/annotation.js"></script>
    <script src="resources/scripts/axure/axQuery.std.js"></script>
    <script src="resources/scripts/axure/doc.js"></script>
    <script src="resources/scripts/messagecenter.js"></script>
    <script src="resources/scripts/axure/events.js"></script>
    <script src="resources/scripts/axure/recording.js"></script>
    <script src="resources/scripts/axure/action.js"></script>
    <script src="resources/scripts/axure/expr.js"></script>
    <script src="resources/scripts/axure/geometry.js"></script>
    <script src="resources/scripts/axure/flyout.js"></script>
    <script src="resources/scripts/axure/model.js"></script>
    <script src="resources/scripts/axure/repeater.js"></script>
    <script src="resources/scripts/axure/sto.js"></script>
    <script src="resources/scripts/axure/utils.temp.js"></script>
    <script src="resources/scripts/axure/variables.js"></script>
    <script src="resources/scripts/axure/drag.js"></script>
    <script src="resources/scripts/axure/move.js"></script>
    <script src="resources/scripts/axure/visibility.js"></script>
    <script src="resources/scripts/axure/style.js"></script>
    <script src="resources/scripts/axure/adaptive.js"></script>
    <script src="resources/scripts/axure/tree.js"></script>
    <script src="resources/scripts/axure/init.temp.js"></script>
    <script src="resources/scripts/axure/legacy.js"></script>
    <script src="resources/scripts/axure/viewer.js"></script>
    <script src="resources/scripts/axure/math.js"></script>
    <script src="resources/scripts/axure/jquery.nicescroll.min.js"></script>
    <script src="data/document.js"></script>
    <script src="files/page_de_discussion/data.js"></script>
    <script type="text/javascript">
      $axure.utils.getTransparentGifPath = function() { return 'resources/images/transparent.gif'; };
      $axure.utils.getOtherPath = function() { return 'resources/Other.html'; };
      $axure.utils.getReloadPath = function() { return 'resources/reload.html'; };
    </script>
  </head>
  <body>
    <div id="base" class="">

      <!-- Unnamed (header) -->

      <!-- Unnamed (Rectangle) -->
      <div id="u1" class="ax_default box_2">
        <div id="u1_div" class=""></div>
        <div id="u1_text" class="text " style="display:none; visibility: hidden">
          <p></p>
        </div>
      </div>

      <!-- Unnamed (Image) -->
      <div id="u2" class="ax_default image">
        <img id="u2_img" class="img " src="images/page_de_discussion/u2.png"/>
        <div id="u2_text" class="text " style="display:none; visibility: hidden">
          <p></p>
        </div>
      </div>

      <!-- Bouton header mes notes  (Rectangle) -->
      <div id="u3" class="ax_default button" data-label="Bouton header mes notes ">
        <img id="u3_img" class="img " src="images/page_de_discussion/bouton_header_mes_notes__u3.svg"/>
        <div id="u3_text" class="text ">
          <p><span>Mes notes </span></p>
        </div>
      </div>

      <!-- Bouton header mes notes  (Rectangle) -->
      <div id="u4" class="ax_default button" data-label="Bouton header mes notes ">
        <img id="u4_img" class="img " src="images/page_de_discussion/bouton_header_mes_notes__u3.svg"/>
        <div id="u4_text" class="text ">
          <p><span>Ecrire une note</span></p>
        </div>
      </div>

      <!-- Unnamed (Shape) -->
      <div id="u5" class="ax_default icon">
        <img id="u5_img" class="img " src="images/page_de_discussion/u5.svg"/>
        <div id="u5_text" class="text " style="display:none; visibility: hidden">
          <p></p>
        </div>
      </div>
      <div id="u0" style="display:none; visibility:hidden;"></div>

      <!-- Unnamed (Rectangle) -->
      <div id="u6" class="ax_default heading_1">
        <div id="u6_div" class=""></div>
        <div id="u6_text" class="text " style="display:none; visibility: hidden">
          <p></p>
        </div>
      </div>

      <!-- Titre element de reponse (Rectangle) -->
      <div id="u7" class="ax_default heading_3" data-label="Titre element de reponse">
        <div id="u7_div" class=""></div>
        <div id="u7_text" class="text ">
          <p><span>Eléments de réponse: </span></p>
        </div>
      </div>

      <!-- Titre element de reponse (Rectangle) -->
      <div id="u8" class="ax_default heading_3" data-label="Titre element de reponse">
        <div id="u8_div" class=""></div>
        <div id="u8_text" class="text ">
          <p><span>Phrases d'ugence </span></p>
        </div>
      </div>

      <!-- Bouton urgence 1 (Rectangle) -->
      <div id="u9" class="ax_default button" data-label="Bouton urgence 1">
        <img id="u9_img" class="img " src="images/page_de_discussion/bouton_urgence_1_u9.svg"/>
        <div id="u9_text" class="text ">
          <p><span>J'ai besoin d'aide</span></p>
        </div>
      </div>

       <!-- Synthétisation vocale -->

      <script>
        var synth = window.speechSynthesis;
    
        document.getElementById("u9").onclick = function() {
            var text = document.getElementById("u9_text").textContent;
            var utterance = new SpeechSynthesisUtterance(text);
            synth.speak(utterance);
        };
      </script>

      <!-- Bouton urgence 2 (Rectangle) -->
      <div id="u10" class="ax_default button" data-label="Bouton urgence 2">
        <img id="u10_img" class="img " src="images/page_de_discussion/bouton_urgence_1_u9.svg"/>
        <div id="u10_text" class="text ">
          <p><span>Je dois voir un médecin</span></p>
        </div>
      </div>

      <!-- Synthétisation vocale -->

      <script>
        var synth = window.speechSynthesis;
    
        document.getElementById("u10").onclick = function() {
            var text = document.getElementById("u10_text").textContent;
            var utterance = new SpeechSynthesisUtterance(text);
            synth.speak(utterance);
        };
      </script>



      <!-- Titre Mes notes -->
      <div id="u11" class="ax_default heading_3" data-label="Titre element de reponse">
        <div id="u11_div" class=""></div>
        <div id="u11_text" class="text ">
          <p><span>Mes notes </span></p>
        </div>
      </div>

      <!-- Bouton urgence 1 (Rectangle) -->
      <div id="u12" class="ax_default button" data-label="Bouton urgence 1" >
        <img id="u12_img" class="img " src="images/page_de_discussion/bouton_urgence_1_u9.svg"/>
        <div id="u12_text" class="text ">
          <p><span>Note médecin </span></p>
        </div>
      </div>

      <!-- Bouton élément de reponse 1 (Rectangle) -->
      <div id="u13" class="ax_default button" data-label="Bouton élément de reponse 1" onclick="addSentence1()">
        <div id="u13_div" class=""></div>
        <div id="u13_text" class="text " style="display:none; visibility: hidden">
          <p></p>
        </div>
      </div>

      <!-- Script ajout de la phrase  -->

      <script>
        function addSentence1() {
          pred = document.getElementById('u13_div').innerText
          
          u67 = document.getElementById("u67_input").value
          console.log(u67)
          test = u67+ "\n" +pred
          console.log(test)
          document.getElementById("u67_input").value = test;
        }
      </script>

      <!-- Bouton élément de reponse 2 (Rectangle) -->
      <div id="u14" class="ax_default button" data-label="Bouton élément de reponse 2" onclick="addSentence2()">
        <div id="u14_div" class=""></div>
        <div id="u14_text" class="text " style="display:none; visibility: hidden">
          <p></p>
        </div>
      </div>

      <script>
        function addSentence2() {
          pred = document.getElementById('u14_div').innerText
          u67 = document.getElementById("u67_input").value
          test =u67+ " \n" + pred
          console.log(test)
          document.getElementById("u67_input").value = test;
        }
      </script>


      <!-- Bouton élément de reponse 3 (Rectangle) -->
      <div id="u15" class="ax_default button" data-label="Bouton élément de reponse 3" onclick="addSentence3()">
        <div id="u15_div" class=""></div>
        <div id="u15_text" class="text " style="display:none; visibility: hidden">
          <p></p>
        </div>
      </div>

      <script>
        function addSentence3() {
          pred = document.getElementById('u15_div').innerText
          u67 = document.getElementById("u67_input").value
          test = u67+ " \n" + pred
          console.log(test)
          document.getElementById("u67_input").value = test;
        }
      </script>

      <!-- Bouton prediction 1 (Rectangle) -->
      <div id="u16" class="ax_default button" data-label="Bouton prediction 1" onclick="addWord1()">
        <div id="u16_div" class=""></div>
        <div id="u16_text" class="text " style="display:none; visibility: hidden">
          <p></p>
        </div>
      </div>

      <!-- Script ajout du mot  -->

      <script>
        function addWord1() {
          pred = document.getElementById('u16_div').innerText
          u64 = document.getElementById("u64_input").value
          test = u64+ " " + pred
          document.getElementById("u64_input").value = test;
          startPred()
        }
      </script>

      <!-- Bouton prediction 2 (Rectangle) -->
      <div id="u17" class="ax_default button" data-label="Bouton prediction 2" onclick="addWord2()">
        <div id="u17_div" class=""></div>
        <div id="u17_text" class="text " style="display:none; visibility: hidden">
          <p></p>
        </div>
      </div>

      <script>
        function addWord2() {
          pred = document.getElementById('u17_div').innerText
          u64 = document.getElementById("u64_input").value
          test = u64+ " " + pred
          document.getElementById("u64_input").value = test;
          startPred()
        }
      </script>

      <!-- Bouton prediction 3 (Rectangle) -->
      <div id="u18" class="ax_default button" data-label="Bouton prediction 3" onclick="addWord3()">
        <div id="u18_div" class=""></div>
        <div id="u18_text" class="text " style="display:none; visibility: hidden">
          <p></p>
        </div>
      </div>

      <script>
        function addWord3() {
          pred = document.getElementById('u18_div').innerText
          u64 = document.getElementById("u64_input").value
          test = u64+ " " + pred
          document.getElementById("u64_input").value = test;
          startPred()
        }
      </script>

      <!-- Bouton prediction 4 (Rectangle) -->
      <div id="u19" class="ax_default button" data-label="Bouton prediction 4" onclick="addWord4()">
        <div id="u19_div" class=""></div>
        <div id="u19_text" class="text " style="display:none; visibility: hidden">
          <p></p>
        </div>
      </div>

      <script>
        function addWord4() {
          pred = document.getElementById('u19_div').innerText
          u64 = document.getElementById("u64_input").value
          test = u64+ " " + pred
          document.getElementById("u64_input").value = test;
          startPred()
        }
      </script>

      <!-- Unnamed (Rectangle) -->
      <div id="u20" class="ax_default primary_button">
        <div id="u20_div" class=""></div>
        <div id="u20_text" class="text ">
          <p><span>Créer une note </span></p>
        </div>
      </div>

      <!-- Cadre clavier  (Rectangle) -->
      <div id="u21" class="ax_default box_1" data-label="Cadre clavier ">
        <div id="u21_div" class=""></div>
        <div id="u21_text" class="text " style="display:none; visibility: hidden">
          <p></p>
        </div>
      </div>

      <!-- boutton espace  (Rectangle) -->
      <div id="u22" class="ax_default button" data-label="boutton espace " onclick="startPred()">
        <div id="u22_div" class=""></div>
        <div id="u22_text" class="text ">
          <p><span>Espace</span></p>
        </div>
      </div>

      <!-- boutton supprimer (Rectangle) -->
      <div id="u23" class="ax_default button" data-label="boutton supprimer">
        <div id="u23_div" class=""></div>
        <div id="u23_text" class="text ">
          <p><span>Supprimer</span></p>
        </div>
      </div>

      <!-- boutton A (Rectangle) -->
      <div id="u24" class="ax_default button" data-label="boutton A">
        <div id="u24_div" class=""></div>
        <div id="u24_text" class="text ">
          <p><span>A</span></p>
        </div>
      </div>

      <!-- boutton Z (Rectangle) -->
      <div id="u25" class="ax_default button" data-label="boutton Z">
        <div id="u25_div" class=""></div>
        <div id="u25_text" class="text ">
          <p><span>Z</span></p>
        </div>
      </div>

      <!-- boutton Y (Rectangle) -->
      <div id="u26" class="ax_default button" data-label="boutton Y">
        <div id="u26_div" class=""></div>
        <div id="u26_text" class="text ">
          <p><span>Y</span></p>
        </div>
      </div>

      <!-- boutton E (Rectangle) -->
      <div id="u27" class="ax_default button" data-label="boutton E">
        <div id="u27_div" class=""></div>
        <div id="u27_text" class="text ">
          <p><span>E</span></p>
        </div>
      </div>

      <!-- boutton R (Rectangle) -->
      <div id="u28" class="ax_default button" data-label="boutton R">
        <div id="u28_div" class=""></div>
        <div id="u28_text" class="text ">
          <p><span>R</span></p>
        </div>
      </div>

      <!-- boutton T (Rectangle) -->
      <div id="u29" class="ax_default button" data-label="boutton T">
        <div id="u29_div" class=""></div>
        <div id="u29_text" class="text ">
          <p><span>T</span></p>
        </div>
      </div>

      <!-- boutton U (Rectangle) -->
      <div id="u30" class="ax_default button" data-label="boutton U">
        <div id="u30_div" class=""></div>
        <div id="u30_text" class="text ">
          <p><span>U</span></p>
        </div>
      </div>

      <!-- boutton O (Rectangle) -->
      <div id="u31" class="ax_default button" data-label="boutton O">
        <div id="u31_div" class=""></div>
        <div id="u31_text" class="text ">
          <p><span>O</span></p>
        </div>
      </div>

      <!-- boutton I (Rectangle) -->
      <div id="u32" class="ax_default button" data-label="boutton I">
        <div id="u32_div" class=""></div>
        <div id="u32_text" class="text ">
          <p><span>I</span></p>
        </div>
      </div>

      <!-- boutton P (Rectangle) -->
      <div id="u33" class="ax_default button" data-label="boutton P">
        <div id="u33_div" class=""></div>
        <div id="u33_text" class="text ">
          <p><span>P</span></p>
        </div>
      </div>

      <!-- boutton Q (Rectangle) -->
      <div id="u34" class="ax_default button" data-label="boutton Q">
        <div id="u34_div" class=""></div>
        <div id="u34_text" class="text ">
          <p><span>Q</span></p>
        </div>
      </div>

      <!-- boutton S (Rectangle) -->
      <div id="u35" class="ax_default button" data-label="boutton S">
        <div id="u35_div" class=""></div>
        <div id="u35_text" class="text ">
          <p><span>S</span></p>
        </div>
      </div>

      <!-- boutton H (Rectangle) -->
      <div id="u36" class="ax_default button" data-label="boutton H">
        <div id="u36_div" class=""></div>
        <div id="u36_text" class="text ">
          <p><span>H</span></p>
        </div>
      </div>

      <!-- boutton D (Rectangle) -->
      <div id="u37" class="ax_default button" data-label="boutton D">
        <div id="u37_div" class=""></div>
        <div id="u37_text" class="text ">
          <p><span>D</span></p>
        </div>
      </div>

      <!-- boutton F (Rectangle) -->
      <div id="u38" class="ax_default button" data-label="boutton F">
        <div id="u38_div" class=""></div>
        <div id="u38_text" class="text ">
          <p><span>F</span></p>
        </div>
      </div>

      <!-- boutton G (Rectangle) -->
      <div id="u39" class="ax_default button" data-label="boutton G">
        <div id="u39_div" class=""></div>
        <div id="u39_text" class="text ">
          <p><span>G</span></p>
        </div>
      </div>

      <!-- boutton J (Rectangle) -->
      <div id="u40" class="ax_default button" data-label="boutton J">
        <div id="u40_div" class=""></div>
        <div id="u40_text" class="text ">
          <p><span>J</span></p>
        </div>
      </div>

      <!-- boutton L (Rectangle) -->
      <div id="u41" class="ax_default button" data-label="boutton L">
        <div id="u41_div" class=""></div>
        <div id="u41_text" class="text ">
          <p><span>L</span></p>
        </div>
      </div>

      <!-- boutton K (Rectangle) -->
      <div id="u42" class="ax_default button" data-label="boutton K">
        <div id="u42_div" class=""></div>
        <div id="u42_text" class="text ">
          <p><span>K</span></p>
        </div>
      </div>

      <!-- boutton M (Rectangle) -->
      <div id="u43" class="ax_default button" data-label="boutton M">
        <div id="u43_div" class=""></div>
        <div id="u43_text" class="text ">
          <p><span>M</span></p>
        </div>
      </div>

      <!-- boutton W (Rectangle) -->
      <div id="u44" class="ax_default button" data-label="boutton W">
        <div id="u44_div" class=""></div>
        <div id="u44_text" class="text ">
          <p><span>W</span></p>
        </div>
      </div>

      <!-- boutton X (Rectangle) -->
      <div id="u45" class="ax_default button" data-label="boutton X">
        <div id="u45_div" class=""></div>
        <div id="u45_text" class="text ">
          <p><span>X</span></p>
        </div>
      </div>

      <!-- boutton N (Rectangle) -->
      <div id="u46" class="ax_default button" data-label="boutton N">
        <div id="u46_div" class=""></div>
        <div id="u46_text" class="text ">
          <p><span>N</span></p>
        </div>
      </div>

      <!-- boutton C (Rectangle) -->
      <div id="u47" class="ax_default button" data-label="boutton C">
        <div id="u47_div" class=""></div>
        <div id="u47_text" class="text ">
          <p><span>C</span></p>
        </div>
      </div>

      <!-- boutton V (Rectangle) -->
      <div id="u48" class="ax_default button" data-label="boutton V">
        <div id="u48_div" class=""></div>
        <div id="u48_text" class="text ">
          <p><span>V</span></p>
        </div>
      </div>

      <!-- boutton B (Rectangle) -->
      <div id="u49" class="ax_default button" data-label="boutton B">
        <div id="u49_div" class=""></div>
        <div id="u49_text" class="text ">
          <p><span>B</span></p>
        </div>
      </div>

      <!-- boutton point (Rectangle) -->
      <div id="u50" class="ax_default button" data-label="boutton point">
        <div id="u50_div" class=""></div>
        <div id="u50_text" class="text ">
          <p><span>.</span></p>
        </div>
      </div>

      <!-- boutton exclamation (Rectangle) -->
      <div id="u51" class="ax_default button" data-label="boutton exclamation">
        <div id="u51_div" class=""></div>
        <div id="u51_text" class="text ">
          <p><span>!</span></p>
        </div>
      </div>

      <!-- boutton virgule (Rectangle) -->
      <div id="u52" class="ax_default button" data-label="boutton virgule">
        <div id="u52_div" class=""></div>
        <div id="u52_text" class="text ">
          <p><span>,</span></p>
        </div>
      </div>

      <!-- boutton interogation (Rectangle) -->
      <div id="u53" class="ax_default button" data-label="boutton interogation">
        <div id="u53_div" class=""></div>
        <div id="u53_text" class="text ">
          <p><span>?</span></p>
        </div>
      </div>

      <!-- boutton 1 (Rectangle) -->
      <div id="u54" class="ax_default button" data-label="boutton 1">
        <div id="u54_div" class=""></div>
        <div id="u54_text" class="text ">
          <p><span>1</span></p>
        </div>
      </div>

      <!-- boutton 2 (Rectangle) -->
      <div id="u55" class="ax_default button" data-label="boutton 2">
        <div id="u55_div" class=""></div>
        <div id="u55_text" class="text ">
          <p><span>2</span></p>
        </div>
      </div>

      <!-- boutton 6 (Rectangle) -->
      <div id="u56" class="ax_default button" data-label="boutton 6">
        <div id="u56_div" class=""></div>
        <div id="u56_text" class="text ">
          <p><span>6</span></p>
        </div>
      </div>

      <!-- boutton 3 (Rectangle) -->
      <div id="u57" class="ax_default button" data-label="boutton 3">
        <div id="u57_div" class=""></div>
        <div id="u57_text" class="text ">
          <p><span>3</span></p>
        </div>
      </div>

      <!-- boutton 4 (Rectangle) -->
      <div id="u58" class="ax_default button" data-label="boutton 4">
        <div id="u58_div" class=""></div>
        <div id="u58_text" class="text ">
          <p><span>4</span></p>
        </div>
      </div>

      <!-- boutton 5 (Rectangle) -->
      <div id="u59" class="ax_default button" data-label="boutton 5">
        <div id="u59_div" class=""></div>
        <div id="u59_text" class="text ">
          <p><span>5</span></p>
        </div>
      </div>

      <!-- boutton 7 (Rectangle) -->
      <div id="u60" class="ax_default button" data-label="boutton 7">
        <div id="u60_div" class=""></div>
        <div id="u60_text" class="text ">
          <p><span>7</span></p>
        </div>
      </div>

      <!-- boutton 9 (Rectangle) -->
      <div id="u61" class="ax_default button" data-label="boutton 9">
        <div id="u61_div" class=""></div>
        <div id="u61_text" class="text ">
          <p><span>9</span></p>
        </div>
      </div>

      <!-- boutton 8 (Rectangle) -->
      <div id="u62" class="ax_default button" data-label="boutton 8">
        <div id="u62_div" class=""></div>
        <div id="u62_text" class="text ">
          <p><span>8</span></p>
        </div>
      </div>

      <!-- boutton 0 (Rectangle) -->
      <div id="u63" class="ax_default button" data-label="boutton 0">
        <div id="u63_div" class=""></div>
        <div id="u63_text" class="text ">
          <p><span>0</span></p>
        </div>
      </div>

      <!-- affichage ecriture phrase (Text Field) -->
      <div id="u64" class="ax_default text_field" data-label="affichage ecriture phrase">
        <div id="u64_div" class=""></div>
        <input id="u64_input" type="text" value="" class="u64_input"/>
      </div>

      
      <!-- Ajouter lettre saisie du clavier et lancer NWP avec l'espace -->
    
      <script>
        //var question = "";
        var input = document.getElementById("u64_input"); 
    
        var buttons = document.querySelectorAll('[data-label^="boutton"]');
        buttons.forEach(function(button) {
            button.onclick = function() {
                var letter = button.querySelector(".text p").textContent.toLowerCase();
    
                if (letter === "espace") {
                    // Ajouter un espace à la valeur de l'input
                    input.value += " ";
                    startPred();
                } 
                else if (letter === "supprimer") {
                    // Ajouter un espace à la valeur de l'input
                    input.value = input.value.slice(0, -1);
                }else {
                    // Ajouter la lettre à la valeur de l'input
                    input.value += letter;
                    //question = input.value;
                }
            };
        });


       </script>
<!--Prédiction et affichage dans bon rectangle -->
        <script>
          
          function startPred() {
            word = document.getElementById('u64_input').value
            console.log("console: ", word)
          
            fetch('http://127.0.0.1:8000/nwp', {
              method: 'POST',
              headers: {
                'Content-Type': 'application/json'
              },
              body: JSON.stringify({
                'question': word
              })
            })
            .then(response => response.json())
            .then(data => {
              document.getElementById("u16_div").innerText = data[0];
              document.getElementById("u17_div").innerText = data[1];
              document.getElementById("u18_div").innerText = data[2];
              document.getElementById("u19_div").innerText = data[3];

              console.log(data);
            })
            .catch(error => console.error(error));
            
          }


    
          
        </script>

      <!-- bouton écouter  (Rectangle) -->
      <div id="u65" class="ax_default button" data-label="bouton écouter "  onclick="startRecognition()">
        <div id="u65_div" class=""></div>
        <div id="u65_text" class="text ">
          <p><span>Ecouter </span></p>
        </div>
      </div>

      <!--clique bouton de réponse-->
      <script>
        var synth = window.speechSynthesis;

        document.getElementById("u13").onclick = function() {
            var text = document.getElementById("u13_div").textContent;
            var utterance = new SpeechSynthesisUtterance(text);
            synth.speak(utterance);
            addSentence1();
            startRecognition();
        };
      </script>
      <script>
        var synth = window.speechSynthesis;
      
        document.getElementById("u14").onclick = function() {
            var text = document.getElementById("u14_div").textContent;
            var utterance = new SpeechSynthesisUtterance(text);
            synth.speak(utterance);
            addSentence2();
            startRecognition();
            
        };
      </script>
      <script>
        var synth = window.speechSynthesis;
      
        document.getElementById("u15").onclick = function() {
            var text = document.getElementById("u15_div").textContent;
            var utterance = new SpeechSynthesisUtterance(text);
            synth.speak(utterance);
            addSentence3();
            startRecognition();
        };
      </script>

<script>

  function startRecognition() {
    const recognition = new webkitSpeechRecognition();
    recognition.lang = 'fr-FR';
    recognition.onresult = function(event) {
    var u67Input = document.getElementById('u67_input');
    var speech = event.results[0][0].transcript;
    var previousContent = u67Input.value;
    
    var pred = document.getElementById('u13_div').innerText;
    console.log(u67)
  

    test = previousContent + "\n" + speech;
  
    console.log(test)
    u67Input.value = test;

      
      // Send HTTP POST request to server with transcribed speech as question
      fetch('http://127.0.0.1:8000/prediction', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json'
        },
        body: JSON.stringify({
          'question': test
        })
      })
      .then(response => response.json())
      .then(data => {
        document.getElementById("u13_div").innerText = data[0];
        document.getElementById("u14_div").innerText = data[1];
        document.getElementById("u15_div").innerText = data[2];

        console.log(data);
      })
      .catch(error => console.error(error));
    }
    
  recognition.start();
  return test;
}

  
function getIdentifierFromURL() {
  const urlParams = new URLSearchParams(window.location.search);
  const identifiant = urlParams.get('identifiant');
  const idok = identifiant.toString();
  console.log(identifiant);
  return idok
  // Utilisez la valeur de l'identifiant ici
}



function startSaving() {
  var resultat = startRecognition();
  var id2 = getIdentifierFromURL();

  // Send HTTP POST request to server with transcribed speech as question and id2 as query parameter
  fetch(`http://127.0.0.1:8000/save?id2=${id2}`, {
    method: 'POST',
    headers: {
      'Content-Type': 'application/json'
    },
    body: JSON.stringify({
      'question': resultat
    })
  })
  .catch(error => console.error(error));
}


</script>
      

      <!-- Boutton OK (Rectangle) -->
      <div id="u66" class="ax_default button" data-label="Boutton OK" onclick="addSentence()">
        <div id="u66_div" class=""></div>
        <div id="u66_text" class="text ">
          <p><span>OK</span></p>
        </div>
      </div>

      

      <!-- Unnamed (Text Area) -->
      <div id="u67" class="ax_default text_area">
        <div id="u67_div" class=""></div>
        <textarea id="u67_input" class="u67_input"></textarea>
      </div>

      <!-- Bouton fin de discussion (Rectangle) -->
      <div id="u68" class="ax_default button" data-label="Bouton fin de discussion" onclick="startSaving()">
        <div id="u68_div" class=""></div>
        <div id="u68_text" class="text ">
          <p><span>FIN</span></p>
        </div>
      </div>

      <script>
        function addSentence() {
          u64 = document.getElementById("u64_input").value
          u67 = document.getElementById("u67_input").value
          test = u67+ " \n" + u64
          document.getElementById("u67_input").value = test;
          document.getElementById("u64_input").value = "";

          var synth = window.speechSynthesis;
          var utterance = new SpeechSynthesisUtterance(u64);
          synth.speak(utterance);
      
        }
      </script>
      
  
    </div>
    <script src="resources/scripts/axure/ios.js"></script>
  </body>
</html>
